{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet SearchFlightsComponent = class SearchFlightsComponent {\n  constructor(flightService, bookService, fb, router) {\n    this.flightService = flightService;\n    this.bookService = bookService;\n    this.fb = fb;\n    this.router = router;\n    this.searchResult = [];\n    this.currentUser = null;\n    this.seasonName = null;\n    this.searchForm = this.fb.group({\n      from: [''],\n      destination: [''],\n      fromDate: [''],\n      toDate: [''],\n      numberOfPassengers: [1]\n    });\n  }\n  ngOnInit() {\n    this.search();\n    const userJson = sessionStorage.getItem('CurrentUser');\n    if (userJson) {\n      this.currentUser = JSON.parse(userJson);\n    }\n  }\n  search(seasonName) {\n    if (seasonName) {\n      this.seasonName = seasonName;\n    }\n    const formValue = Object.assign(Object.assign({}, this.searchForm.value), {\n      seasonName: this.seasonName\n    });\n    this.flightService.searchFlight(formValue).subscribe(response => this.searchResult = response, err => this.handleError(err));\n    this.seasonName = null;\n  }\n  bookFlight(flight) {\n    console.log(\"SearchFlights\");\n    console.log(flight);\n    this.bookService.setFlight(flight); // Store flight data in service\n    this.router.navigate(['/book-flight']);\n  }\n  handleError(err) {\n    console.log(\"Response Error. Status: \", err.status);\n    console.log(\"Response Error. Status Text: \", err.statusText);\n    console.log(err);\n  }\n  getDiscountedPrice(price) {\n    if (this.currentUser && this.currentUser.packetid !== 1) {\n      var discountedPrice = price * (1 - this.currentUser.purchasepercent / 100);\n      return Math.round(discountedPrice);\n    }\n    return null;\n  }\n};\nSearchFlightsComponent = __decorate([Component({\n  selector: 'app-search-flights',\n  templateUrl: './search-flights.component.html',\n  styleUrls: ['./search-flights.component.css']\n})], SearchFlightsComponent);\nexport { SearchFlightsComponent };","map":null,"metadata":{},"sourceType":"module"}